@model SaaSCloud.Models.CRMProductModel
@using SaaSCloud.Models
@using SaaSCloud.Common;
@{
    //ViewBag.Title = "Edit";
    SessionInfo session = new SessionInfo();
    CRMInfoModel CRMInfo ;
    if (Model.ProdName == "CRM行銷高手") {
        CRMInfo = session.SaaSCloudInfo.mainProdPurchaseInfo.PurchaseCRMStandard;
    } else {
        CRMInfo = session.SaaSCloudInfo.mainProdPurchaseInfo.PurchaseCRMAdvance ;
    } 
}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="x-ua-compatible" content="IE=edge, chrome=1">	
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href="/Content/SaaSCloud/saas_buy.css" rel="stylesheet" media="screen" />
<title>CRM@{@Model.ProdName}產品-加購帳號需求</title>
<style>
	#custom_container{ width:1170px; max-width:100%;min-height: 370px !important;padding-top: 20px; text-align:center;}
	#custom_container>div{ width:800px; max-width:100%; margin:auto;}
	#custom_container .row-fluid{margin-top: 20px;}
	#custom_container a.btn {width: 100%;padding: 15px 0px;display: block;max-width: 200px;margin: auto;font-size: 12pt;color: #333;background: #fff;border-color: #adadad;}
	#custom_container a.btn:hover{background-color: #e6e6e6;border-color: #adadad;}
	.slt_box{width:610px; max-width:90%;margin: auto;text-align: center;}
	#foot.row-fluid [class*="span"]{ float:right;margin-right: 2.564102564102564%; margin-left:0px;}
	#foot.row-fluid [class*="span"]:first-child{margin-right:0px;}
	table{text-align: left; max-width:860px; width:100%;margin: auto;}
	table th{ font-weight:bold; text-align:center; background:#eee;}
	table td,table th{ border:1px solid #ccc; padding:5px;}
	@@media (max-width: 1200px) {
		#foot.row-fluid [class*="span"] {margin-right: 2.1%;}
	}
	@@media (max-width: 767px) {
		#custom_container .row-fluid [class*="span"]{ margin-bottom:10px;}
		#custom_container>div{ width:auto;}
		#foot.row-fluid [class*="span"]{margin-right: 0%; margin-left:0px;}
	}
</style>
</head>
<body>
<div id="custom_container">
    <div>
        <h1>
        	@{@Model.ProdName}產品-加購帳號/儲存空間
		</h1>
        <form id="form1" name="form1" method="post" action="CRM_check">
            <input type="hidden" name="prodName" id="prodName" value="@Model.ProdName" />
            <div class="row-fluid">
                <div class="slt_box">
                	<table cellspacing="0" cellpadding="0">
                        <tr>
                            <th width="33%" scope="col">現有CRM帳號</th>
                            <th width="33%" scope="col">加購帳號</th>
                            <th width="33%" scope="col">合計帳號數</th>
                        </tr>
                        <tr>
                            <td scope="row" align="center"><input id="CRM_old_acct" name="CRM_old_acct" value="@CRMInfo.AccountNumber" style="display:none;" />@CRMInfo.AccountNumber 個</td>
                            <td align="center">
                                <select id="CRM_acct" name="CRM_acct" style="width:80px; vertical-align:middle; margin:0px;">
                                    <option>0</option>
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                    <option>6</option>
                                    <option>7</option>
                                    <option>8</option>
                                    <option>9</option>
                                    <option>10</option>
                                </select>
                                &nbsp;個
                            </td>
                            <td align="center"><input id="crm_acct_total" name="crm_acct_total" value="1" style="display:none;" /><span id="crm_acct_total_text">1</span>個</td>
                        </tr>
                    </table>                   
                </div>
            </div>
            <div class="row-fluid">
                <div class="slt_box">
                	<table style="width:100%" cellspacing="0" cellpadding="0">
                        <tr>
                            <th width="33%" scope="col">現有儲存空間</th>
                            <th width="33%" scope="col">加購儲存空間</th>
                            <th width="33%" scope="col">合計儲存空間</th>
                        </tr>
                        <tr>
                            <td scope="row" align="center"><input id="CRM_old_space" name="CRM_old_space" value="@CRMInfo.SpaceSize" style="display:none;" />@CRMInfo.SpaceSize GB</td>
                            <td align="center">
                                <select id="CRM_space" name="CRM_space" style="width:80px; vertical-align:middle; margin:0px;">
                                    <option>0</option>
                                    <option>1</option>
                                    <option>2</option>
                                    <option>3</option>
                                    <option>4</option>
                                    <option>5</option>
                                    <option>6</option>
                                    <option>7</option>
                                    <option>8</option>
                                    <option>9</option>
                                    <option>10</option>
                                </select>
                                &nbsp;GB
                            </td>
                            <td align="center"><input id="CRM_space_total" name="CRM_space_total" value="1" style="display:none;" /><span id="crm_space_total_text">1</span>GB</td>
                        </tr>
                    </table>
                </div>
            </div>
        </form>
    </div>
    <div id="foot" class="row-fluid" style="padding-bottom:20px;">
		<div class="span6">
            <a class="btn foot_btn" href="javascript:submitForm();">
                我要加購
            </a>
        </div>
		<div class="span6">
            @*<a href="#" onclick="goto('Index', 'Home');" class="btn foot_btn">*@
            <a href="javascript:window.history.back();" class="btn foot_btn">
                回上頁
            </a>
        </div>
    </div>
</div>
<script>
	$(document).ready(function(){ 
	    $('#CRM_acct').change(flushAccountNumber);
	    $('#CRM_space').change(flushSize);
	    flushAccountNumber();
	    flushSize();
	}) 

	function submitForm() {
		if ($('#CRM_acct').val() == "0" && $('#CRM_space').val() == "0"){
			alert("請輸入加購數量");
		}
		else{
			$('#form1').submit();
		}
	}

	function flushAccountNumber() {
	    var p1 = parseInt($('#CRM_acct').val());//selected的值 
	    //alert("p1: " + p1);
	    var p2 = parseInt($('#CRM_old_acct').val());//原帳號數的值
	    //alert("p2: " + p2);
	    $("#crm_acct_total").val(p1 + p2);
	    $("#crm_acct_total_text").text(p1 + p2);
	}

	function flushSize() {
	    var p1 = parseInt($('#CRM_space').val());//selected的值 
	    var p2 = parseInt($('#CRM_old_space').val());//原空間數的值
	    $("#crm_space_total").val(p1 + p2);
	    $("#crm_space_total_text").text(p1 + p2);
	}
</script>
</body>
</html>
